diff --git a/libselinux/src/label_internal.h b/libselinux/src/label_internal.h
index d09847c8..253ddbef 100644
--- a/vendor/selinux/libselinux/src/label_internal.h
+++ b/vendor/selinux/libselinux/src/label_internal.h
@@ -15,7 +15,7 @@
 #include <selinux/label.h>
 #include "sha1.h"

-#if defined(ANDROID) || defined(__APPLE__)
+#if defined(__ANDROID__) || defined(__APPLE__)
 // Android and Mac do not have fgets_unlocked()
 #define fgets_unlocked(buf, size, fp) fgets(buf, size, fp)
 #endif
